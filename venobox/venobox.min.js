/*
*VenoBox-jQueryPlugin
*version:1.8.2
*@requiresjQuery>=1.7.0
*
*Examplesathttp://veno.es/venobox/
*License:MITLicense
*LicenseURI:https://github.com/nicolafranchini/VenoBox/blob/master/LICENSE
*Copyright2013-2024NicolaFranchini-@nicolafranchini
*
*/
!function(e){"usestrict";varo,t,a,i,s,n,c,r,d,l,v,u,b,p,m,f,h,g,k,x,y,w,C,_,P,B,E,O,U,D,M,N,V,z,R,X,Y,j,W,q;e.fn.extend({venobox:function($){varI=this,A={arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",infinigall:!1,htmlClose:"&times;",htmlNext:"<span>Next</span>",htmlPrev:"<span>Prev</span>",numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",cb_pre_open:function(){return!0},cb_post_open:function(){},cb_pre_close:function(){return!0},cb_post_close:function(){},cb_post_resize:function(){},cb_after_nav:function(){},cb_init:function(){}},H=e.extend(A,$);returnH.cb_init(I),this.each(function(){function$(){y=O.data("gall"),h=O.data("numeratio"),b=O.data("infinigall"),p=e('.vbox-item[data-gall="'+y+'"]'),w=p.eq(p.index(O)+1),C=p.eq(p.index(O)-1),w.length||b!==!0||(w=p.eq(0)),p.length>1?(U=p.index(O)+1,a.html(U+"/"+p.length)):U=1,h===!0?a.show():a.hide(),""!==x?i.show():i.hide(),w.length||b===!0?(e(".vbox-next").css("display","block"),_=!0):(e(".vbox-next").css("display","none"),_=!1),p.index(O)>0||b===!0?(e(".vbox-prev").css("display","block"),P=!0):(e(".vbox-prev").css("display","none"),P=!1),(P===!0||_===!0)&&(r.on(ne.DOWN,T),r.on(ne.MOVE,Z),r.on(ne.UP,F))}functionA(e){returne.length<1?!1:m?!1:(m=!0,g=e.data("overlay")||e.data("overlaycolor"),v=e.data("framewidth"),u=e.data("frameheight"),s=e.data("border"),t=e.data("bgcolor"),d=e.data("href")||e.attr("href"),o=e.data("autoplay"),x=e.attr(e.data("titleattr"))||"",e===C&&r.addClass("animated").addClass("swipe-right"),e===w&&r.addClass("animated").addClass("swipe-left"),voidr.animate({opacity:0},500,function(){k.css("background",g),r.removeClass("animated").removeClass("swipe-left").removeClass("swipe-right").css({"margin-left":0,"margin-right":0}),"iframe"==e.data("vbtype")?J():"inline"==e.data("vbtype")?oe():"ajax"==e.data("vbtype")?G():"video"==e.data("vbtype")||"vimeo"==e.data("vbtype")||"youtube"==e.data("vbtype")?K(o):(r.html('<imgsrc="'+d+'">'),te()),O=e,$(),m=!1,H.cb_after_nav(O,U,w,C)}))}functionQ(e){27===e.keyCode&&S(),37==e.keyCode&&P===!0&&A(C),39==e.keyCode&&_===!0&&A(w)}functionS(){varo=H.cb_pre_close(O,U,w,C);returno===!1?!1:(e("body").off("keydown",Q).removeClass("vbox-open"),O.focus(),voidk.animate({opacity:0},500,function(){k.remove(),m=!1,H.cb_post_close()}))}functionT(e){r.addClass("animated"),V=R=e.pageY,z=X=e.pageX,D=!0}functionZ(e){if(D===!0){X=e.pageX,R=e.pageY,j=X-z,W=R-V;varo=Math.abs(j),t=Math.abs(W);o>t&&100>=o&&(e.preventDefault(),r.css("margin-left",j))}}functionF(e){if(D===!0){D=!1;varo=O,t=!1;Y=X-z,0>Y&&_===!0&&(o=w,t=!0),Y>0&&P===!0&&(o=C,t=!0),Math.abs(Y)>=q&&t===!0?A(o):r.css({"margin-left":0,"margin-right":0})}}functionG(){e.ajax({url:d,cache:!1}).done(function(e){r.html('<divclass="vbox-inline">'+e+"</div>"),te()}).fail(function(){r.html('<divclass="vbox-inline"><p>Errorretrievingcontents,pleaseretry</div>'),ae()})}functionJ(){r.html('<iframeclass="venoframe"src="'+d+'"></iframe>'),ae()}functionK(e){varo,t=L(d),a=e?"?rel=0&autoplay=1":"?rel=0",i=a+ee(d);"vimeo"==t.type?o="https://player.vimeo.com/video/":"youtube"==t.type&&(o="https://www.youtube.com/embed/"),r.html('<iframeclass="venoframevbvid"webkitallowfullscreenmozallowfullscreenallowfullscreenframeborder="0"src="'+o+t.id+i+'"></iframe>'),ae()}functionL(e){if(e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),RegExp.$3.indexOf("youtu")>-1)varo="youtube";elseif(RegExp.$3.indexOf("vimeo")>-1)varo="vimeo";return{type:o,id:RegExp.$6}}functionee(e){varo="",t=decodeURIComponent(e),a=t.split("?");if(void0!==a[1]){vari,s,n=a[1].split("&");for(s=0;s<n.length;s++)i=n[s].split("="),o=o+"&"+i[0]+"="+i[1]}returnencodeURI(o)}functionoe(){r.html('<divclass="vbox-inline">'+e(d).html()+"</div>"),ae()}functionte(){N=r.find("img"),N.length?N.each(function(){e(this).one("load",function(){ae()})}):ae()}functionae(){i.html(x),r.find(">:first-child").addClass("figlio").css({width:v,height:u,padding:s,background:t}),e("img.figlio").on("dragstart",function(e){e.preventDefault()}),ie(),r.animate({opacity:"1"},"slow",function(){})}functionie(){varo=r.outerHeight(),t=e(window).height();f=t>o+60?(t-o)/2:"30px",r.css("margin-top",f),r.css("margin-bottom",f),H.cb_post_resize()}if(O=e(this),O.data("venobox"))return!0;I.VBclose=function(){S()},O.addClass("vbox-item"),O.data("framewidth",H.framewidth),O.data("frameheight",H.frameheight),O.data("border",H.border),O.data("bgcolor",H.bgcolor),O.data("numeratio",H.numeratio),O.data("infinigall",H.infinigall),O.data("overlaycolor",H.overlayColor),O.data("titleattr",H.titleattr),O.data("venobox",!0),O.on("click",function(b){b.preventDefault(),O=e(this);varp=H.cb_pre_open(O);if(p===!1)return!1;switch(I.VBnext=function(){A(w)},I.VBprev=function(){A(C)},g=O.data("overlay")||O.data("overlaycolor"),v=O.data("framewidth"),u=O.data("frameheight"),o=O.data("autoplay")||H.autoplay,s=O.data("border"),t=O.data("bgcolor"),_=!1,P=!1,m=!1,d=O.data("href")||O.attr("href"),l=O.data("css")||"",x=O.attr(O.data("titleattr"))||"",B='<divclass="vbox-preloader">',H.spinner){case"rotating-plane":B+='<divclass="sk-rotating-plane"></div>';break;case"double-bounce":B+='<divclass="sk-double-bounce"><divclass="sk-childsk-double-bounce1"></div><divclass="sk-childsk-double-bounce2"></div></div>';break;case"wave":B+='<divclass="sk-wave"><divclass="sk-rectsk-rect1"></div><divclass="sk-rectsk-rect2"></div><divclass="sk-rectsk-rect3"></div><divclass="sk-rectsk-rect4"></div><divclass="sk-rectsk-rect5"></div></div>';break;case"wandering-cubes":B+='<divclass="sk-wandering-cubes"><divclass="sk-cubesk-cube1"></div><divclass="sk-cubesk-cube2"></div></div>';break;case"spinner-pulse":B+='<divclass="sk-spinnersk-spinner-pulse"></div>';break;case"three-bounce":B+='<divclass="sk-three-bounce"><divclass="sk-childsk-bounce1"></div><divclass="sk-childsk-bounce2"></div><divclass="sk-childsk-bounce3"></div></div>';break;case"cube-grid":B+='<divclass="sk-cube-grid"><divclass="sk-cubesk-cube1"></div><divclass="sk-cubesk-cube2"></div><divclass="sk-cubesk-cube3"></div><divclass="sk-cubesk-cube4"></div><divclass="sk-cubesk-cube5"></div><divclass="sk-cubesk-cube6"></div><divclass="sk-cubesk-cube7"></div><divclass="sk-cubesk-cube8"></div><divclass="sk-cubesk-cube9"></div></div>'}returnB+="</div>",E='<aclass="vbox-next">'+H.htmlNext+'</a><aclass="vbox-prev">'+H.htmlPrev+"</a>",M='<divclass="vbox-title"></div><divclass="vbox-num">0/0</div><divclass="vbox-close">'+H.htmlClose+"</div>",n='<divclass="vbox-overlay'+l+'"style="background:'+g+'">'+B+'<divclass="vbox-container"><divclass="vbox-content"></div></div>'+M+E+"</div>",e("body").append(n).addClass("vbox-open"),e(".vbox-preloader.sk-child,.vbox-preloader.sk-rotating-plane,.vbox-preloader.sk-rect,.vbox-preloader.sk-cube,.vbox-preloader.sk-spinner-pulse").css("background-color",H.spinColor),k=e(".vbox-overlay"),c=e(".vbox-container"),r=e(".vbox-content"),a=e(".vbox-num"),i=e(".vbox-title"),i.css(H.titlePosition,"-1px"),i.css({color:H.titleColor,"background-color":H.titleBackground}),e(".vbox-close").css({color:H.closeColor,"background-color":H.closeBackground}),e(".vbox-num").css(H.numerationPosition,"-1px"),e(".vbox-num").css({color:H.numerationColor,"background-color":H.numerationBackground}),e(".vbox-nextspan,.vbox-prevspan").css({"border-top-color":H.arrowsColor,"border-right-color":H.arrowsColor}),r.html(""),r.css("opacity","0"),k.css("opacity","0"),$(),k.animate({opacity:1},250,function(){"iframe"==O.data("vbtype")?J():"inline"==O.data("vbtype")?oe():"ajax"==O.data("vbtype")?G():"video"==O.data("vbtype")||"vimeo"==O.data("vbtype")||"youtube"==O.data("vbtype")?K(o):(r.html('<imgsrc="'+d+'">'),te()),H.cb_post_open(O,U,w,C)}),e("body").keydown(Q),e(".vbox-prev").on("click",function(){A(C)}),e(".vbox-next").on("click",function(){A(w)}),!1});varse=".vbox-overlay";H.overlayClose||(se=".vbox-close"),e(document).on("click",se,function(o){(e(o.target).is(".vbox-overlay")||e(o.target).is(".vbox-content")||e(o.target).is(".vbox-close")||e(o.target).is(".vbox-preloader"))&&S()}),z=0,X=0,Y=0,q=50,D=!1;varne={DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"},ce=function(o){vart;switch(o.type){case"mousedown":t=ne.DOWN;break;case"mouseup":t=ne.UP;break;case"mouseout":t=ne.UP;break;case"mousemove":t=ne.MOVE;break;default:return}vara=de(t,o,o.pageX,o.pageY);e(o.target).trigger(a)},re=function(o){vart;switch(o.type){case"touchstart":t=ne.DOWN;break;case"touchend":t=ne.UP;break;case"touchmove":t=ne.MOVE;break;default:return}vara,i=o.originalEvent.touches[0];a=t==ne.UP?de(t,o,null,null):de(t,o,i.pageX,i.pageY),e(o.target).trigger(a)},de=function(o,t,a,i){returne.Event(o,{pageX:a,pageY:i,originalEvent:t})};"ontouchstart"inwindow?(e(document).on("touchstart",re),e(document).on("touchmove",re),e(document).on("touchend",re)):(e(document).on("mousedown",ce),e(document).on("mouseup",ce),e(document).on("mouseout",ce),e(document).on("mousemove",ce)),e(window).resize(function(){e(".vbox-content").length&&setTimeout(ie(),800)})})}})}(jQuery);